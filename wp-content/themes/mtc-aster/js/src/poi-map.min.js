!function(){"use strict";var a=null,l=null,t=$("#categories"),s=null,r=null,p=null,i=$("#mobile-label"),m=$("#mobile-category-overlay"),d=null,g=null,c=!1;function e(){c=$(window).width()<=768}function u(){p.fitBounds(a);var e=google.maps.event.addListener(p,"idle",function(){18<p.getZoom()&&p.setZoom(18),google.maps.event.removeListener(e)})}function f(e){var o=$(document.createElement("li")),n=$(document.createElement("span"));return n.addClass("ease"),o.addClass("ease"),n.html(e.name),o.append(n),n.on({click:function(){!function(e){for(var o in a=new google.maps.LatLngBounds(g),l){var n=l[o].name!=e.name?null:p,i=l[o].name!=e.name?"":"active";for(var t in void 0!==l[o].element&&(l[o].element.removeClass(),""!=i&&l[o].element.addClass(i)),l[o].pois)void 0!==l[o].pois[t].marker&&(l[o].pois[t].marker.setMap(n),n&&a.extend(l[o].pois[t].marker.position))}u()}(e),m.is(":visible")&&(m.trigger("click"),i.slideUp()),c&&t.slideToggle()}}),o}function y(e){for(var o in e.pois){var n=v(e.pois[o]);a.extend(n.position),e.pois[o].marker=n}}function v(e){var o=null;s&&(o={url:s.url,size:new google.maps.Size(s.width,s.height),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(s.width/2,s.height/2)});var n=new google.maps.LatLng(e.lat,e.lng),i='<div class="website"><a href="http://www.'+e.url+'" target="_blank">'+e.url+"</a></div>",t='<div class="directions"><a href="http://maps.google.com/?q='+e.address+'" target="_blank">Directions</a></div>',a=(""!==e.description&&e.description,new google.maps.InfoWindow({content:'<div class="info-window"><div class="name"><strong>'+e.name+'</strong></div><div class="address">'+e.address.replace(", ","<br />")+"</div>"+i+t+"</div>"})),l=new google.maps.Marker({icon:o,infoWindow:a,map:p,position:n,title:e.name});return google.maps.event.addListener(l,"click",function(e){r&&r.close(),l.infoWindow.open(p,l),r=l.infoWindow}),l}function w(){if(d){g=new google.maps.LatLng(d.lat,d.lng);var e={url:d.property_map_marker.url,size:new google.maps.Size(d.property_map_marker.width,d.property_map_marker.height),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(d.property_map_marker.width/2,d.property_map_marker.height/2)},o='<a href="http://maps.google.com/?q='+d.address+", "+d.city+", "+d.state+" "+d.zip+'" target="_blank">Directions</a>',n=new google.maps.InfoWindow({content:'<div class="info-window"><div class="name"><strong>'+d.property_name+'</strong></div><div class="address">'+d.address.replace(", ","<br />")+",<br />"+d.city+", "+d.state+" "+d.zip+"</div>"+o+"</div>"}),i=new google.maps.Marker({icon:e,infoWindow:n,map:p,position:g,title:d.property_name});return google.maps.event.addListener(i,"click",function(e){r&&r.close(),i.infoWindow.open(p,i),r=i.infoWindow}),a=new google.maps.LatLngBounds(g),function(){for(var e in l){s=l[e].marker;var o=f(l[e]);l[e].element=o,y(l[e]),t.append(o)}u()}(),i}}function o(){$.ajax({cache:!1,url:themeData.templateURL+"/JSON/neighborhood.json",dataType:"json",success:function(e){l=e.categories,console.log(e),d=e.property,function(){var e=null;d&&(e=new google.maps.LatLng(d.lat,d.lng));var o="custom_style",n={center:e,zoom:14,scrollwheel:!1,streetViewControl:!1,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.LEFT_CENTER},mapTypeId:o,draggable:!0},i=new google.maps.StyledMapType([{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#e0efef"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"on"},{hue:"#1900ff"},{color:"#c0e8e8"}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:100},{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{visibility:"on"},{lightness:700}]},{featureType:"water",elementType:"all",stylers:[{color:"#7dcdcd"}]}],{name:o});(p=new google.maps.Map(document.getElementById("map"),n)).mapTypes.set(o,i),w()}()}}),i.on("click",function(){t.slideToggle()}),c&&t.css("display","block")}$(document).ready(function(){o(),e()}),$(window).on({resize:function(){e()}})}();